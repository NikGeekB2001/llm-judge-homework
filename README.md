# –¢—Ä–µ–∫–∏–Ω–≥ LLM-–∏–Ω—Ñ–µ—Ä–µ–Ω—Å–∞ —Å vLLM (LLM-as-a-Judge)

## –¶–µ–ª—å –∑–∞–¥–∞–Ω–∏—è

–í –¥–∞–Ω–Ω–æ–º –¥–æ–º–∞—à–Ω–µ–º –∑–∞–¥–∞–Ω–∏–∏ –æ—Å–≤–æ–µ–Ω –ø–æ–ª–Ω—ã–π —Ü–∏–∫–ª –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è LLM –≤ —Ä–æ–ª–∏ –æ—Ü–µ–Ω—â–∏–∫–∞ (LLM-as-a-Judge):
*   –†–∞–∑–≤—ë—Ä–Ω—É—Ç–∞ —Å–æ–±—Å—Ç–≤–µ–Ω–Ω–∞—è –º–æ–¥–µ–ª—å —á–µ—Ä–µ–∑ vLLM.
*   –ù–∞—Å—Ç—Ä–æ–µ–Ω–∞ –∫–∞—Å—Ç–æ–º–Ω–∞—è –º–µ—Ç—Ä–∏–∫–∞ –æ—Ü–µ–Ω–∫–∏ –∫–∞—á–µ—Å—Ç–≤–∞ –æ—Ç–≤–µ—Ç–æ–≤ —Å –ø–æ–º–æ—â—å—é MLflow.
*   –û—Å—É—â–µ—Å—Ç–≤–ª–µ–Ω—ã –≤—ã–∑–æ–≤—ã –º–æ–¥–µ–ª–∏ —á–µ—Ä–µ–∑ OpenAI-—Å–æ–≤–º–µ—Å—Ç–∏–º—ã–π API.
*   –°—Ñ–æ—Ä–º–∏—Ä–æ–≤–∞–Ω—ã –∑–∞–ø—Ä–æ—Å—ã –Ω–∞ –æ—Ü–µ–Ω–∫—É –∏ –ø—Ä–æ–∞–Ω–∞–ª–∏–∑–∏—Ä–æ–≤–∞–Ω–æ –ø–æ–≤–µ–¥–µ–Ω–∏–µ –º–æ–¥–µ–ª–∏ –≤ —Ä–æ–ª–∏ "—Å—É–¥—å–∏".

## –°—Ç—Ä—É–∫—Ç—É—Ä–∞ –ø—Ä–æ–µ–∫—Ç–∞

##  –°—Ç—Ä—É–∫—Ç—É—Ä–∞ –ø—Ä–æ–µ–∫—Ç–∞

```
llm-judge-homework/
‚îú‚îÄ‚îÄ .vscode/                 # –ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è VS Code
‚îú‚îÄ‚îÄ .env                     # –ü–µ—Ä–µ–º–µ–Ω–Ω—ã–µ –æ–∫—Ä—É–∂–µ–Ω–∏—è (—Ç–æ–∫–µ–Ω Hugging Face)
‚îú‚îÄ‚îÄ .gitignore              # –§–∞–π–ª—ã –¥–ª—è –∏–≥–Ω–æ—Ä–∏—Ä–æ–≤–∞–Ω–∏—è Git
‚îú‚îÄ‚îÄ README.md               # –î–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è –ø—Ä–æ–µ–∫—Ç–∞
‚îú‚îÄ‚îÄ requirements.txt        # –ó–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏ Python
‚îú‚îÄ‚îÄ vllm_server/
‚îÇ   ‚îî‚îÄ‚îÄ run_vllm_server.sh  # –°–∫—Ä–∏–ø—Ç –¥–ª—è –∑–∞–ø—É—Å–∫–∞ vLLM —Å–µ—Ä–≤–µ—Ä–∞
‚îú‚îÄ‚îÄ llm_client/
‚îÇ   ‚îú‚îÄ‚îÄ __init__.py
‚îÇ   ‚îú‚îÄ‚îÄ vllm_api_client.py  # –ö–ª–∏–µ–Ω—Ç –¥–ª—è HTTP –∑–∞–ø—Ä–æ—Å–æ–≤
‚îÇ   ‚îî‚îÄ‚îÄ openai_client_example.py  # –ö–ª–∏–µ–Ω—Ç –¥–ª—è OpenAI API
‚îú‚îÄ‚îÄ mlflow_tracking/
‚îÇ   ‚îú‚îÄ‚îÄ __init__.py
‚îÇ   ‚îú‚îÄ‚îÄ custom_metrics.py   # –ö–∞—Å—Ç–æ–º–Ω–∞—è –º–µ—Ç—Ä–∏–∫–∞ LLM-as-a-Judge
‚îÇ   ‚îú‚îÄ‚îÄ run_experiment.py   # –°–∫—Ä–∏–ø—Ç –¥–ª—è –∑–∞–ø—É—Å–∫–∞ MLflow —ç–∫—Å–ø–µ—Ä–∏–º–µ–Ω—Ç–∞
‚îÇ   ‚îú‚îÄ‚îÄ data/
‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ evaluation_data.csv  # –î–∞–Ω–Ω—ã–µ –¥–ª—è –æ—Ü–µ–Ω–∫–∏
‚îÇ   ‚îî‚îÄ‚îÄ prompts/
‚îÇ       ‚îî‚îÄ‚îÄ judge_prompt.txt     # –ü—Ä–æ–º–ø—Ç –¥–ª—è LLM-—Å—É–¥—å–∏
‚îî‚îÄ‚îÄ screenshots/            # –ü–∞–ø–∫–∞ –¥–ª—è —Å–∫—Ä–∏–Ω—à–æ—Ç–æ–≤
```

##  –ü–æ—à–∞–≥–æ–≤–∞—è –∏–Ω—Å—Ç—Ä—É–∫—Ü–∏—è –ø–æ –∑–∞–ø—É—Å–∫—É
## –ó–∞–ø—É—Å–∫ –ø—Ä–æ–µ–∫—Ç–∞

### 1. –ü—Ä–µ–¥–≤–∞—Ä–∏—Ç–µ–ª—å–Ω–∞—è –Ω–∞—Å—Ç—Ä–æ–π–∫–∞

1.  **–ö–ª–æ–Ω–∏—Ä—É–π—Ç–µ —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏–π (–µ—Å–ª–∏ –≤—ã –µ–≥–æ –∑–∞–≥—Ä—É–∑–∏–ª–∏ —Å GitHub):**
    ```bash
    cd llm-judge-homework
    ```
2.  **–°–æ–∑–¥–∞–π—Ç–µ –∏ –∞–∫—Ç–∏–≤–∏—Ä—É–π—Ç–µ –≤–∏—Ä—Ç—É–∞–ª—å–Ω–æ–µ –æ–∫—Ä—É–∂–µ–Ω–∏–µ:**
    ```bash
    python3 -m venv .venv
    # –î–ª—è Linux/macOS:
    source .venv/bin/activate
    # –î–ª—è Windows (PowerShell):
    .\.venv\Scripts\Activate.ps1
    ```
3.  **–£—Å—Ç–∞–Ω–æ–≤–∏—Ç–µ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏:**
    ```bash
    pip install -r requirements.txt
    ```
4.  **–ù–∞—Å—Ç—Ä–æ–π—Ç–µ Hugging Face —Ç–æ–∫–µ–Ω (–µ—Å–ª–∏ –∏—Å–ø–æ–ª—å–∑—É–µ—Ç–µ –º–æ–¥–µ–ª–∏, —Ç—Ä–µ–±—É—é—â–∏–µ –∞–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏–∏, –Ω–∞–ø—Ä–∏–º–µ—Ä Llama 3, Zephyr):**
    *   –°–æ–∑–¥–∞–π—Ç–µ —Ñ–∞–π–ª `.env` –≤ –∫–æ—Ä–Ω–µ –ø—Ä–æ–µ–∫—Ç–∞ (–µ—Å–ª–∏ –µ–≥–æ –Ω–µ—Ç) –∏ –¥–æ–±–∞–≤—å—Ç–µ –≤–∞—à —Ç–æ–∫–µ–Ω:
        ```
        HUGGING_FACE_HUB_TOKEN=hf_YOUR_HUGGINGFACE_TOKEN_HERE
        ```
    *   –í—ã–ø–æ–ª–Ω–∏—Ç–µ –≤—Ö–æ–¥ —á–µ—Ä–µ–∑ Hugging Face CLI: `huggingface-cli login`.

### 2. –ó–∞–ø—É—Å–∫ vLLM —Å–µ—Ä–≤–µ—Ä–∞

1.  **–ü–µ—Ä–µ–π–¥–∏—Ç–µ –≤ –¥–∏—Ä–µ–∫—Ç–æ—Ä–∏—é `vllm_server`:**
    ```bash
    cd vllm_server
    ```
2.  **–û—Ç—Ä–µ–¥–∞–∫—Ç–∏—Ä—É–π—Ç–µ `run_vllm_server.sh`**, —É–∫–∞–∑–∞–≤ –∏–º—è –≤—ã–±—Ä–∞–Ω–Ω–æ–π –≤–∞–º–∏ –º–æ–¥–µ–ª–∏ (–Ω–∞–ø—Ä–∏–º–µ—Ä, `facebook/opt-1.3b` –∏–ª–∏ `meta-llama/Meta-Llama-3-8B-Instruct`).
3.  **–ó–∞–ø—É—Å—Ç–∏—Ç–µ —Å–µ—Ä–≤–µ—Ä:**
    ```bash
    bash run_vllm_server.sh
    ```
    –£–±–µ–¥–∏—Ç–µ—Å—å, —á—Ç–æ —Å–µ—Ä–≤–µ—Ä —É—Å–ø–µ—à–Ω–æ –∑–∞–≥—Ä—É–∑–∏–ª –º–æ–¥–µ–ª—å –∏ –Ω–∞—á–∞–ª –ø—Ä–æ—Å–ª—É—à–∏–≤–∞—Ç—å –ø–æ—Ä—Ç `8000`.
    **–°–∫—Ä–∏–Ω—à–æ—Ç:** –°–¥–µ–ª–∞–π—Ç–µ —Å–∫—Ä–∏–Ω—à–æ—Ç —Ä–∞–±–æ—Ç–∞—é—â–µ–≥–æ —Ç–µ—Ä–º–∏–Ω–∞–ª–∞ —Å —Å–µ—Ä–≤–µ—Ä–æ–º vLLM –∏ —Å–æ—Ö—Ä–∞–Ω–∏—Ç–µ –µ–≥–æ –∫–∞–∫ `screenshots/vllm_running.png`.
4.  **–û—Å—Ç–∞–≤—å—Ç–µ —Å–µ—Ä–≤–µ—Ä –∑–∞–ø—É—â–µ–Ω–Ω—ã–º** –¥–ª—è —Å–ª–µ–¥—É—é—â–∏—Ö —à–∞–≥–æ–≤.
bash run_vllm_server.sh

–ø–µ—Ä–µ–∑–∞–ø—É—Å–∫ –µ—Å–ª–∏ –ø–æ—Ç—Ä–µ–±—É–µ—Ç—Å—è 
cd llm-judge-homework/vllm_server

–ü—Ä–æ–≤–µ—Ä—å—Ç–µ —Ä–∞–±–æ—Ç—É —Å–µ—Ä–≤–µ—Ä–∞:
curl http://localhost:8000/v1/models



cd ../mlflow_tracking

### 3. –í–∑–∞–∏–º–æ–¥–µ–π—Å—Ç–≤–∏–µ —Å –ª–æ–∫–∞–ª—å–Ω–æ–π –º–æ–¥–µ–ª—å—é

–û—Ç–∫—Ä–æ–π—Ç–µ –Ω–æ–≤—ã–π —Ç–µ—Ä–º–∏–Ω–∞–ª –∏ –ø–µ—Ä–µ–π–¥–∏—Ç–µ –æ–±—Ä–∞—Ç–Ω–æ –≤ –∫–æ—Ä–Ω–µ–≤—É—é –¥–∏—Ä–µ–∫—Ç–æ—Ä–∏—é –ø—Ä–æ–µ–∫—Ç–∞.

1.  **–ò—Å–ø–æ–ª—å–∑—É—è –±–∏–±–ª–∏–æ—Ç–µ–∫—É `requests` (–∏–ª–∏ `httpx`):**
    *   –û—Ç—Ä–µ–¥–∞–∫—Ç–∏—Ä—É–π—Ç–µ `llm_client/vllm_api_client.py`, —É–∫–∞–∑–∞–≤ –∏–º—è –≤–∞—à–µ–π –º–æ–¥–µ–ª–∏.
    *   –ó–∞–ø—É—Å—Ç–∏—Ç–µ —Å–∫—Ä–∏–ø—Ç:
        ```bash
        python llm_client/vllm_api_client.py
        ```
    *   **–ü—Ä–æ–≤–µ—Ä–∫–∞:** –£–±–µ–¥–∏—Ç–µ—Å—å, —á—Ç–æ –≤—ã –ø–æ–ª—É—á–∞–µ—Ç–µ –∫–æ—Ä—Ä–µ–∫—Ç–Ω—ã–π –æ—Ç–≤–µ—Ç –æ—Ç –º–æ–¥–µ–ª–∏.
    *   **–°–∫—Ä–∏–Ω—à–æ—Ç:** –°–¥–µ–ª–∞–π—Ç–µ —Å–∫—Ä–∏–Ω—à–æ—Ç –≤—ã–≤–æ–¥–∞ —Å–∫—Ä–∏–ø—Ç–∞ –∏ —Å–æ—Ö—Ä–∞–Ω–∏—Ç–µ –µ–≥–æ –∫–∞–∫ `screenshots/vllm_response_requests.png`.

2.  **–ò—Å–ø–æ–ª—å–∑—É—è –±–∏–±–ª–∏–æ—Ç–µ–∫—É `openai`:**
    *   –û—Ç—Ä–µ–¥–∞–∫—Ç–∏—Ä—É–π—Ç–µ `llm_client/openai_client_example.py`, —É–∫–∞–∑–∞–≤ –∏–º—è –≤–∞—à–µ–π –º–æ–¥–µ–ª–∏.
    *   –ó–∞–ø—É—Å—Ç–∏—Ç–µ —Å–∫—Ä–∏–ø—Ç:
        ```bash
        python llm_client/openai_client_example.py
        ```
    *   **–ü—Ä–æ–≤–µ—Ä–∫–∞:** –£–±–µ–¥–∏—Ç–µ—Å—å, —á—Ç–æ –≤—ã –ø–æ–ª—É—á–∞–µ—Ç–µ –∫–æ—Ä—Ä–µ–∫—Ç–Ω—ã–π –æ—Ç–≤–µ—Ç. –û–±—Ä–∞—Ç–∏—Ç–µ –≤–Ω–∏–º–∞–Ω–∏–µ –Ω–∞ –Ω–∞—Å—Ç—Ä–æ–π–∫–∏ `base_url` –∏ `api_key` –¥–ª—è –∫–ª–∏–µ–Ω—Ç–∞ `openai`.
    *   **–°–∫—Ä–∏–Ω—à–æ—Ç:** –°–¥–µ–ª–∞–π—Ç–µ —Å–∫—Ä–∏–Ω—à–æ—Ç –≤—ã–≤–æ–¥–∞ —Å–∫—Ä–∏–ø—Ç–∞ –∏ —Å–æ—Ö—Ä–∞–Ω–∏—Ç–µ –µ–≥–æ –∫–∞–∫ `screenshots/vllm_response_openai.png`.

### 4. MLflow –∏ –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è –∫–∞—Å—Ç–æ–º–Ω–æ–π genai –º–µ—Ç—Ä–∏–∫–∏ (LLM-as-a-Judge)

1.  **–ü–æ–¥–≥–æ—Ç–æ–≤—å—Ç–µ –¥–∞–Ω–Ω—ã–µ –¥–ª—è –æ—Ü–µ–Ω–∫–∏:**
    *   –û—Ç–∫—Ä–æ–π—Ç–µ `mlflow_tracking/data/evaluation_data.csv`.
    *   –ó–∞–ø–æ–ª–Ω–∏—Ç–µ –µ–≥–æ —Ç–µ—Å—Ç–æ–≤—ã–º–∏ –≤–æ–ø—Ä–æ—Å–∞–º–∏ –≤ –∫–æ–ª–æ–Ω–∫–µ `inputs` –∏ *–æ—Ç–≤–µ—Ç–∞–º–∏, –∫–æ—Ç–æ—Ä—ã–µ –≤–∞—à–∞ LLM-—Å—É–¥—å—è –¥–æ–ª–∂–Ω–∞ –±—É–¥–µ—Ç –æ—Ü–µ–Ω–∏—Ç—å*, –≤ –∫–æ–ª–æ–Ω–∫–µ `predictions`.
        ```csv
        inputs,predictions
        What is the capital of France?,Paris is the capital of France.
        Who is the current president of the USA?,Joe Biden is the current president of the United States.
        Tell me about quantum physics.,Quantum physics is a branch of science that describes the behavior of matter and energy at the atomic and subatomic level.
        What is the primary function of a CPU?,"A CPU is the central processing unit, responsible for executing instructions and performing calculations in a computer."
        ```
2.  **–†–∞–∑—Ä–∞–±–æ—Ç–∞–π—Ç–µ –ø—Ä–æ–º–ø—Ç –¥–ª—è LLM-—Å—É–¥—å–∏:**
    *   –û—Ç–∫—Ä–æ–π—Ç–µ `mlflow_tracking/prompts/judge_prompt.txt`.
    *   –°—Ñ–æ—Ä–º—É–ª–∏—Ä—É–π—Ç–µ —á–µ—Ç–∫–∏–π –∏ –ø–æ–¥—Ä–æ–±–Ω—ã–π –ø—Ä–æ–º–ø—Ç, –∫–æ—Ç–æ—Ä—ã–π –±—É–¥–µ—Ç –∏–Ω—Å—Ç—Ä—É–∫—Ç–∏—Ä–æ–≤–∞—Ç—å LLM –æ—Ü–µ–Ω–∏–≤–∞—Ç—å –æ—Ç–≤–µ—Ç—ã. –í–∫–ª—é—á–∏—Ç–µ –∫—Ä–∏—Ç–µ—Ä–∏–∏ –æ—Ü–µ–Ω–∫–∏ (—Ç–æ—á–Ω–æ—Å—Ç—å, –ø–æ–ª–Ω–æ—Ç–∞, —Ä–µ–ª–µ–≤–∞–Ω—Ç–Ω–æ—Å—Ç—å, –ª–∞–∫–æ–Ω–∏—á–Ω–æ—Å—Ç—å) –∏ **–æ–±—è–∑–∞—Ç–µ–ª—å–Ω–æ** —É–∫–∞–∂–∏—Ç–µ –æ–∂–∏–¥–∞–µ–º—ã–π —Ñ–æ—Ä–º–∞—Ç –≤—ã–≤–æ–¥–∞ (–Ω–∞–ø—Ä–∏–º–µ—Ä, "–û—Ü–µ–Ω–∫–∞: [—á–∏—Å–ª–æ –æ—Ç 1 –¥–æ 5]\n–û–±–æ—Å–Ω–æ–≤–∞–Ω–∏–µ: [—Ç–µ–∫—Å—Ç]").
    *   **–†–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏—è:** –î–æ–±–∞–≤—å—Ç–µ –Ω–µ—Å–∫–æ–ª—å–∫–æ –ø—Ä–∏–º–µ—Ä–æ–≤ (few-shot) –≤ –ø—Ä–æ–º–ø—Ç, –µ—Å–ª–∏ –≤–∞—à–∞ –º–æ–¥–µ–ª—å-—Å—É–¥—å—è –Ω–µ —è–≤–ª—è–µ—Ç—Å—è –æ—á–µ–Ω—å –º–æ—â–Ω–æ–π, —á—Ç–æ–±—ã —É–ª—É—á—à–∏—Ç—å –∫–∞—á–µ—Å—Ç–≤–æ –æ—Ü–µ–Ω–∫–∏.
    –ü—Ä–∏–º–µ—Ä —Å–æ–¥–µ—Ä–∂–∏–º–æ–≥–æ `judge_prompt.txt`:
    ```
    –í—ã —è–≤–ª—è–µ—Ç–µ—Å—å —ç–∫—Å–ø–µ—Ä—Ç–Ω—ã–º –æ—Ü–µ–Ω—â–∏–∫–æ–º –∫–∞—á–µ—Å—Ç–≤–∞ –æ—Ç–≤–µ—Ç–æ–≤. –í–∞—à–∞ –∑–∞–¥–∞—á–∞ - –æ—Ü–µ–Ω–∏—Ç—å –ø—Ä–µ–¥–æ—Å—Ç–∞–≤–ª–µ–Ω–Ω—ã–π –æ—Ç–≤–µ—Ç –Ω–∞ –≤–æ–ø—Ä–æ—Å –ø–æ —à–∫–∞–ª–µ –æ—Ç 1 –¥–æ 5, –≥–¥–µ 1 - –æ—á–µ–Ω—å –ø–ª–æ—Ö–æ, 5 - –æ—Ç–ª–∏—á–Ω–æ. –û–±–æ—Å–Ω—É–π—Ç–µ —Å–≤–æ—é –æ—Ü–µ–Ω–∫—É, —Å—Å—ã–ª–∞—è—Å—å –Ω–∞ —É–∫–∞–∑–∞–Ω–Ω—ã–µ –∫—Ä–∏—Ç–µ—Ä–∏–∏.

    **–ö—Ä–∏—Ç–µ—Ä–∏–∏ –æ—Ü–µ–Ω–∫–∏:**
    - **–¢–æ—á–Ω–æ—Å—Ç—å (Accuracy):** –û—Ç–≤–µ—Ç –¥–æ–ª–∂–µ–Ω –±—ã—Ç—å —Ñ–∞–∫—Ç–∏—á–µ—Å–∫–∏ –≤–µ—Ä–Ω—ã–º.
    - **–ü–æ–ª–Ω–æ—Ç–∞ (Completeness):** –û—Ç–≤–µ—Ç –¥–æ–ª–∂–µ–Ω –±—ã—Ç—å –¥–æ—Å—Ç–∞—Ç–æ—á–Ω–æ –ø–æ–ª–Ω—ã–º, —á—Ç–æ–±—ã –ø–æ–ª–Ω–æ—Å—Ç—å—é –æ—Ç–≤–µ—Ç–∏—Ç—å –Ω–∞ –≤–æ–ø—Ä–æ—Å, –Ω–æ –±–µ–∑ –∏–∑–ª–∏—à–Ω–µ–π –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏–∏.
    - **–†–µ–ª–µ–≤–∞–Ω—Ç–Ω–æ—Å—Ç—å (Relevance):** –û—Ç–≤–µ—Ç –¥–æ–ª–∂–µ–Ω –±—ã—Ç—å –ø—Ä—è–º–æ –æ—Ç–Ω–æ—Å–∏—Ç—å—Å—è –∫ –∑–∞–¥–∞–Ω–Ω–æ–º—É –≤–æ–ø—Ä–æ—Å—É.
    - **–õ–∞–∫–æ–Ω–∏—á–Ω–æ—Å—Ç—å (Conciseness):** –û—Ç–≤–µ—Ç –¥–æ–ª–∂–µ–Ω –±—ã—Ç—å –∫—Ä–∞—Ç–∫–∏–º –∏ –ø–æ —Å—É—â–µ—Å—Ç–≤—É, –±–µ–∑ "–≤–æ–¥—ã".

    **–§–æ—Ä–º–∞—Ç –≤—ã–≤–æ–¥–∞:**
    –û—Ü–µ–Ω–∫–∞: [–ß–ò–°–õ–û –û–¢ 1 –î–û 5]
    –û–±–æ—Å–Ω–æ–≤–∞–Ω–∏–µ: [–í–ê–®–ï –û–ë–û–°–ù–û–í–ê–ù–ò–ï, —Å—Å—ã–ª–∞—é—â–µ–µ—Å—è –Ω–∞ –∫—Ä–∏—Ç–µ—Ä–∏–∏]

    ---
    –í–æ–ø—Ä–æ—Å: {question}
    –û—Ç–≤–µ—Ç –¥–ª—è –æ—Ü–µ–Ω–∫–∏: {answer}
    ---
    ```
3.  **–†–µ–∞–ª–∏–∑—É–π—Ç–µ –∫–∞—Å—Ç–æ–º–Ω—É—é –º–µ—Ç—Ä–∏–∫—É:**
    *   –û—Ç—Ä–µ–¥–∞–∫—Ç–∏—Ä—É–π—Ç–µ `mlflow_tracking/custom_metrics.py`.
    *   –£–±–µ–¥–∏—Ç–µ—Å—å, —á—Ç–æ —Ñ—É–Ω–∫—Ü–∏—è `evaluate_with_llm_judge` –ø—Ä–∞–≤–∏–ª—å–Ω–æ –≤—ã–∑—ã–≤–∞–µ—Ç –≤–∞—à—É –ª–æ–∫–∞–ª—å–Ω—É—é LLM-—Å—É–¥—å—é –∏ –ø–∞—Ä—Å–∏—Ç –µ—ë –æ—Ç–≤–µ—Ç –¥–ª—è –ø–æ–ª—É—á–µ–Ω–∏—è —á–∏—Å–ª–æ–≤–æ–π –æ—Ü–µ–Ω–∫–∏ –∏ –æ–±–æ—Å–Ω–æ–≤–∞–Ω–∏—è.
    *   –£–∫–∞–∂–∏—Ç–µ –∏–º—è –≤–∞—à–µ–π –º–æ–¥–µ–ª–∏-—Å—É–¥—å–∏ –≤ `parameters` –¥–ª—è `make_genai_metric`.
4.  **–ó–∞–ø—É—Å—Ç–∏—Ç–µ MLflow —ç–∫—Å–ø–µ—Ä–∏–º–µ–Ω—Ç:**
    *   –û—Ç—Ä–µ–¥–∞–∫—Ç–∏—Ä—É–π—Ç–µ `mlflow_tracking/run_experiment.py`, —É–±–µ–¥–∏–≤—à–∏—Å—å, —á—Ç–æ –æ–Ω –ø—Ä–∞–≤–∏–ª—å–Ω–æ –∑–∞–≥—Ä—É–∂–∞–µ—Ç –¥–∞–Ω–Ω—ã–µ –∏ –≤—ã–∑—ã–≤–∞–µ—Ç `mlflow.evaluate()`.
    *   –ó–∞–ø—É—Å—Ç–∏—Ç–µ —Å–∫—Ä–∏–ø—Ç:
        ```bash
        python mlflow_tracking/run_experiment.py
        ```

### 5. –ü—Ä–æ–≤–µ—Ä–∫–∞ —Ä–µ–∑—É–ª—å—Ç–∞—Ç–æ–≤ –≤ MLflow UI

1.  **–ó–∞–ø—É—Å—Ç–∏—Ç–µ MLflow UI:**
    *   –í –∫–æ—Ä–Ω–µ–≤–æ–π –¥–∏—Ä–µ–∫—Ç–æ—Ä–∏–∏ –ø—Ä–æ–µ–∫—Ç–∞ –≤ —Ç–µ—Ä–º–∏–Ω–∞–ª–µ –≤—ã–ø–æ–ª–Ω–∏—Ç–µ:
        ```bash
        mlflow ui
        ```
2.  **–û—Ç–∫—Ä–æ–π—Ç–µ MLflow UI –≤ –±—Ä–∞—É–∑–µ—Ä–µ:** –ü–µ—Ä–µ–π–¥–∏—Ç–µ –ø–æ –∞–¥—Ä–µ—Å—É `http://localhost:5000` (–∏–ª–∏ –ª—é–±–æ–π –¥—Ä—É–≥–æ–π –ø–æ—Ä—Ç, –∫–æ—Ç–æ—Ä—ã–π —É–∫–∞–∑–∞–ª `mlflow ui`).
3.  **–ü—Ä–æ–≤–µ—Ä–∫–∞:**
    *   –ù–∞–π–¥–∏—Ç–µ —Å–≤–æ–π —ç–∫—Å–ø–µ—Ä–∏–º–µ–Ω—Ç (–ø–æ —Ç–µ–≥—É `experiment_type: llm_judge_evaluation` –∏–ª–∏ –ø–æ –∏–º–µ–Ω–∏).
    *   –£–±–µ–¥–∏—Ç–µ—Å—å, —á—Ç–æ –º–µ—Ç—Ä–∏–∫–∞ `llm_judge_accuracy` –æ—Ç–æ–±—Ä–∞–∂–∞–µ—Ç—Å—è.
    *   –ü–µ—Ä–µ–π–¥–∏—Ç–µ –Ω–∞ —Å—Ç—Ä–∞–Ω–∏—Ü—É –¥–µ—Ç–∞–ª–µ–π Run'–∞ (–Ω–∞–∂–∞–≤ –Ω–∞ –¥–∞—Ç—É/–≤—Ä–µ–º—è) –∏ –ø—Ä–æ–≤–µ—Ä—å—Ç–µ, —á—Ç–æ —Ç–∞–º –æ—Ç–æ–±—Ä–∞–∂–∞—é—Ç—Å—è —á–∏—Å–ª–æ–≤–∞—è –æ—Ü–µ–Ω–∫–∞ –∏ –æ–±–æ—Å–Ω–æ–≤–∞–Ω–∏–µ –æ—Ç LLM-—Å—É–¥—å–∏ –¥–ª—è –∫–∞–∂–¥–æ–≥–æ –ø—Ä–∏–º–µ—Ä–∞.
    *   **–°–∫—Ä–∏–Ω—à–æ—Ç:** –°–¥–µ–ª–∞–π—Ç–µ —Å–∫—Ä–∏–Ω—à–æ—Ç –≤–∫–ª–∞–¥–∫–∏ "Experiments" (`screenshots/mlflow_experiments_tab.png`).
    *   **–°–∫—Ä–∏–Ω—à–æ—Ç:** –°–¥–µ–ª–∞–π—Ç–µ —Å–∫—Ä–∏–Ω—à–æ—Ç —Å—Ç—Ä–∞–Ω–∏—Ü—ã —Å –¥–µ—Ç–∞–ª—è–º–∏ –≤–∞—à–µ–≥–æ —É—Å–ø–µ—à–Ω–æ–≥–æ –∑–∞–ø—É—Å–∫–∞ (`screenshots/mlflow_run_details.png`), –≥–¥–µ –≤–∏–¥–Ω—ã –º–µ—Ç—Ä–∏–∫–∏ –∏ –ø–∞—Ä–∞–º–µ—Ç—Ä—ã, –∞ —Ç–∞–∫–∂–µ –ª–æ–≥–∏ LLM-—Å—É–¥—å–∏.

## üìä –ê–Ω–∞–ª–∏–∑ –∏ –∏–Ω—Ç–µ—Ä–ø—Ä–µ—Ç–∞—Ü–∏—è —Ä–µ–∑—É–ª—å—Ç–∞—Ç–æ–≤

–î–æ–±–∞–≤—å—Ç–µ —ç—Ç–æ—Ç —Ä–∞–∑–¥–µ–ª –≤ `README.md` –ø–æ—Å–ª–µ –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è –≤—Å–µ—Ö —à–∞–≥–æ–≤.

1.  **–ö–∞–∫ —Ä–∞–±–æ—Ç–∞–µ—Ç –º–µ—Ç—Ä–∏–∫–∞ LLM-as-a-Judge:**
    *   –û–ø–∏—à–∏—Ç–µ, –∫–∞–∫ –≤–∞—à–∞ –∫–∞—Å—Ç–æ–º–Ω–∞—è –º–µ—Ç—Ä–∏–∫–∞ –≤—ã–∑—ã–≤–∞–µ—Ç LLM-—Å—É–¥—å—é, –∫–∞–∫ —Ñ–æ—Ä–º–∏—Ä—É–µ—Ç—Å—è –ø—Ä–æ–º–ø—Ç, –∏ –∫–∞–∫ –ø–∞—Ä—Å–∏—Ç—Å—è –æ—Ç–≤–µ—Ç –¥–ª—è –ø–æ–ª—É—á–µ–Ω–∏—è –æ—Ü–µ–Ω–∫–∏ –∏ –æ–±–æ—Å–Ω–æ–≤–∞–Ω–∏—è.
2.  **–ü–æ–≤–µ–¥–µ–Ω–∏–µ –º–æ–¥–µ–ª–∏-—Å—É–¥—å–∏:**
    *   –ü—Ä–∏–≤–µ–¥–∏—Ç–µ –ø—Ä–∏–º–µ—Ä—ã –æ—Ü–µ–Ω–æ–∫ –∏ –æ–±–æ—Å–Ω–æ–≤–∞–Ω–∏–π, –∫–æ—Ç–æ—Ä—ã–µ –¥–∞–ª–∞ –≤–∞—à–∞ LLM-—Å—É–¥—å—è.
    *   –ü—Ä–æ–∞–Ω–∞–ª–∏–∑–∏—Ä—É–π—Ç–µ, –≤ –∫–∞–∫–∏—Ö —Å–ª—É—á–∞—è—Ö –æ—Ü–µ–Ω–∫–∏ –±—ã–ª–∏ –∞–¥–µ–∫–≤–∞—Ç–Ω—ã–º–∏, –∞ –≤ –∫–∞–∫–∏—Ö ‚Äî –≤–æ–∑–º–æ–∂–Ω–æ, –æ—à–∏–±–æ—á–Ω—ã–º–∏ –∏–ª–∏ –Ω–µ–æ–±–æ—Å–Ω–æ–≤–∞–Ω–Ω—ã–º–∏. –ö–∞–∫–∏–µ –∫—Ä–∏—Ç–µ—Ä–∏–∏ –º–æ–¥–µ–ª—å —É—á–∏—Ç—ã–≤–∞–ª–∞ –ª—É—á—à–µ –≤—Å–µ–≥–æ?
    *   –ë—ã–ª–∏ –ª–∏ –Ω–µ–æ–∂–∏–¥–∞–Ω–Ω—ã–µ —Ä–µ–∑—É–ª—å—Ç–∞—Ç—ã? –ü–æ—á–µ–º—É, –∫–∞–∫ –≤—ã –¥—É–º–∞–µ—Ç–µ?
3.  **–ü—Ä–µ–∏–º—É—â–µ—Å—Ç–≤–∞ –∏ –Ω–µ–¥–æ—Å—Ç–∞—Ç–∫–∏ LLM-as-a-Judge:**
    *   **–ü—Ä–µ–∏–º—É—â–µ—Å—Ç–≤–∞:** –°–∫–æ—Ä–æ—Å—Ç—å, –º–∞—Å—à—Ç–∞–±–∏—Ä—É–µ–º–æ—Å—Ç—å (–º–æ–∂–Ω–æ –æ—Ü–µ–Ω–∏–≤–∞—Ç—å —Ç—ã—Å—è—á–∏ –æ—Ç–≤–µ—Ç–æ–≤), –∞–≤—Ç–æ–º–∞—Ç–∏–∑–∞—Ü–∏—è, –≥–∏–±–∫–æ—Å—Ç—å (–ª–µ–≥–∫–æ –º–µ–Ω—è—Ç—å –∫—Ä–∏—Ç–µ—Ä–∏–∏ –≤ –ø—Ä–æ–º–ø—Ç–µ).
    *   **–ù–µ–¥–æ—Å—Ç–∞—Ç–∫–∏:** –ó–∞–≤–∏—Å–∏–º–æ—Å—Ç—å –æ—Ç –∫–∞—á–µ—Å—Ç–≤–∞ LLM-—Å—É–¥—å–∏ (–º–æ–∂–µ—Ç –±—ã—Ç—å –ø—Ä–µ–¥–≤–∑—è—Ç–æ–π, "–≥–∞–ª–ª—é—Ü–∏–Ω–∏—Ä–æ–≤–∞—Ç—å" –æ—Ü–µ–Ω–∫–∏), —Å—Ç–æ–∏–º–æ—Å—Ç—å –∏–Ω—Ñ–µ—Ä–µ–Ω—Å–∞ LLM-—Å—É–¥—å–∏, –ø–æ—Ç–µ–Ω—Ü–∏–∞–ª—å–Ω—ã–µ —Å–ª–æ–∂–Ω–æ—Å—Ç–∏ —Å –ø–∞—Ä—Å–∏–Ω–≥–æ–º, –æ—Ç—Å—É—Ç—Å—Ç–≤–∏–µ –∞–±—Å–æ–ª—é—Ç–Ω–æ–π –Ω–∞–¥–µ–∂–Ω–æ—Å—Ç–∏.
4.  **–û–≥—Ä–∞–Ω–∏—á–µ–Ω–∏—è –≤–∞—à–µ–π —Ä–µ–∞–ª–∏–∑–∞—Ü–∏–∏:**
    *   –ö–∞–∫–∏–µ —É–ø—Ä–æ—â–µ–Ω–∏—è –±—ã–ª–∏ —Å–¥–µ–ª–∞–Ω—ã? –ß—Ç–æ –º–æ–∂–Ω–æ —É–ª—É—á—à–∏—Ç—å? (–ù–∞–ø—Ä–∏–º–µ—Ä, –±–æ–ª–µ–µ —Å–ª–æ–∂–Ω—ã–π –ø–∞—Ä—Å–∏–Ω–≥ –æ—Ç–≤–µ—Ç–∞ —Å—É–¥—å–∏, –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ –±–æ–ª–µ–µ –º–æ—â–Ω–æ–π LLM-—Å—É–¥—å–∏, –¥–æ–±–∞–≤–ª–µ–Ω–∏–µ more few-shot –ø—Ä–∏–º–µ—Ä–æ–≤, –æ–±—Ä–∞–±–æ—Ç–∫–∞ –æ—à–∏–±–æ–∫).

---

### **`.vscode/settings.json`**
```json
{
    "python.defaultInterpreterPath": "${workspaceFolder}/.venv/bin/python",
    "python.formatting.provider": "black",
    "python.formatting.blackArgs": [
        "--line-length",
        "100"
    ],
    "editor.formatOnSave": true,
    "editor.codeActionsOnSave": {
        "source.organizeImports": "explicit"
    },
    "python.linting.enabled": true,
    "python.linting.flake8Enabled": true,
    "python.terminal.activateEnvironment": true
}

--------------
‚úÖ –¢–µ–∫—É—â–∏–π —Å—Ç–∞—Ç—É—Å
- **vLLM-—Å–µ—Ä–≤–µ—Ä** –∑–∞–ø—É—â–µ–Ω –∏ –¥–æ—Å—Ç—É–ø–µ–Ω –ø–æ –∞–¥—Ä–µ—Å—É `http://localhost:8000`  
- **–ú–æ–¥–µ–ª—å** `facebook/opt-1.3b` –∑–∞–≥—Ä—É–∂–µ–Ω–∞ –∏ –≥–æ—Ç–æ–≤–∞ –∫ —Ä–∞–±–æ—Ç–µ  
- **API-—ç–Ω–¥–ø–æ–∏–Ω—Ç** `/generate` —Ñ—É–Ω–∫—Ü–∏–æ–Ω–∏—Ä—É–µ—Ç –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ  

‚úÖ –ö–∞–∫ –ø–æ–ª—å–∑–æ–≤–∞—Ç—å—Å—è

1. –ü—Ä–æ–≤–µ—Ä–∏—Ç—å —Ä–∞–±–æ—Ç–æ—Å–ø–æ—Å–æ–±–Ω–æ—Å—Ç—å —Å–µ—Ä–≤–µ—Ä–∞  
   ```bash
   curl http://localhost:8000/health
   ```

2. –ü—Ä–æ—Ç–µ—Å—Ç–∏—Ä–æ–≤–∞—Ç—å –≥–µ–Ω–µ—Ä–∞—Ü–∏—é —Ç–µ–∫—Å—Ç–∞  
   ```bash
   curl -X POST http://localhost:8000/generate \
     -H "Content-Type: application/json" \
     -d '{"prompt": "–°—Ç–æ–ª–∏—Ü–∞ –ì–µ—Ä–º–∞–Ω–∏–∏?", "max_tokens": 50}'
   ```

3. –ó–∞–ø—É—Å—Ç–∏—Ç—å –∫–ª–∏–µ–Ω—Ç—Å–∫–∏–π —Å–∫—Ä–∏–ø—Ç  
   ```bash
   cd llm-judge-homework/llm_client
   python3 vllm_api_client.py
   ```

4. –ó–∞–ø—É—Å—Ç–∏—Ç—å —ç–∫—Å–ø–µ—Ä–∏–º–µ–Ω—Ç –≤ MLflow  
   ```bash
   cd llm-judge-homework/mlflow_tracking
   python3 run_experiment.py
   ```

–ü—Ä–æ–µ–∫—Ç –ø–æ–ª–Ω–æ—Å—Ç—å—é –≥–æ—Ç–æ–≤ –∫ —Ä–µ—à–µ–Ω–∏—é –∑–∞–¥–∞—á LLM-as-a-Judge!
